{
  "info": {
    "name": "artist",
    "_postman_id": "d9e9f8c4-artist-api-collection",
    "description": "Postman collection for Artist features: auth, profile, social, and CRUD endpoints.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "auth",
      "item": [
        {
          "name": "Register Artist",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": { "raw": "{{baseUrl}}/api/artist/register", "host": ["{{baseUrl}}"], "path": ["api","artist","register"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{artistEmail}}\",\n  \"password\": \"{{artistPassword}}\",\n  \"name\": \"{{artistName}}\",\n  \"type\": \"artist\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Created (201)', function () { pm.response.to.have.status(201); });",
                  "pm.test('Has tokens', function () { const j = pm.response.json(); pm.expect(j).to.have.property('accessToken'); pm.expect(j).to.have.property('refreshToken'); });",
                  "pm.collectionVariables.set('accessToken', pm.response.json().accessToken);",
                  "pm.collectionVariables.set('refreshToken', pm.response.json().refreshToken);",
                  "pm.collectionVariables.set('artistId', (pm.response.json().artist && pm.response.json().artist.id) ? pm.response.json().artist.id : '');"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Artist",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": { "raw": "{{baseUrl}}/api/artist/login", "host": ["{{baseUrl}}"], "path": ["api","artist","login"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{artistEmail}}\",\n  \"password\": \"{{artistPassword}}\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('OK (200)', function () { pm.response.to.have.status(200); });",
                  "pm.test('Has tokens', function () { const j = pm.response.json(); pm.expect(j).to.have.property('accessToken'); pm.expect(j).to.have.property('refreshToken'); });",
                  "pm.collectionVariables.set('accessToken', pm.response.json().accessToken);",
                  "pm.collectionVariables.set('refreshToken', pm.response.json().refreshToken);",
                  "if (pm.response.json().artist && pm.response.json().artist._id) { pm.collectionVariables.set('artistId', pm.response.json().artist._id); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Verify OTP (Artist)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/artist/verifyOtp", "host": ["{{baseUrl}}"], "path": ["api","artist","verifyOtp"] },
            "body": { "mode": "raw", "raw": "{\n  \"email\": \"{{artistEmail}}\",\n  \"otp\": \"{{artistOtp}}\"\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": { "type": "text/javascript", "exec": [
                "pm.test('OK (200)', function () { pm.response.to.have.status(200); });",
                "pm.test('OTP verified message', function(){ const j = pm.response.json(); pm.expect(j.message).to.match(/OTP verified/i); });"
              ]}
            }
          ]
        },
        {
          "name": "Resend OTP (Artist)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/artist/resendOtp", "host": ["{{baseUrl}}"], "path": ["api","artist","resendOtp"] },
            "body": { "mode": "raw", "raw": "{\n  \"email\": \"{{artistEmail}}\"\n}" }
          }
        },
        {
          "name": "Forgot Password (Artist)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/artist/forgotPassword", "host": ["{{baseUrl}}"], "path": ["api","artist","forgotPassword"] },
            "body": { "mode": "raw", "raw": "{\n  \"email\": \"{{artistEmail}}\"\n}" }
          }
        },
        {
          "name": "Reset Password (Artist)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/artist/resetPassword", "host": ["{{baseUrl}}"], "path": ["api","artist","resetPassword"] },
            "body": { "mode": "raw", "raw": "{\n  \"email\": \"{{artistEmail}}\",\n  \"otp\": \"{{artistOtp}}\",\n  \"newPassword\": \"{{artistNewPassword}}\"\n}" }
          }
        },
        {
          "name": "Is Verified (Artist)",
          "request": {
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/api/artist/isVerified?email={{artistEmail}}", "host": ["{{baseUrl}}"], "path": ["api","artist","isVerified"], "query": [{"key":"email","value":"{{artistEmail}}"}] }
          }
        }
      ]
    },
    {
      "name": "profile & social",
      "item": [
        {
          "name": "Get My Artist Profile",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/artist/profile/me", "host": ["{{baseUrl}}"], "path": ["api","artist","profile","me"] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
                  "const j = pm.response.json();",
                  "pm.test('Has artist object', function(){ pm.expect(j.success).to.eql(true); pm.expect(j).to.have.property('artist'); pm.expect(j.artist).to.be.an('object'); });",
                  "if (j.artist && j.artist._id) { pm.collectionVariables.set('artistProfileId', j.artist._id); }"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Artist (Admin)",
          "request": { "method": "POST", "header": [ { "key": "Content-Type", "value": "application/json" } ], "url": { "raw": "{{baseUrl}}/api/artist/deleteArtist", "host": ["{{baseUrl}}"], "path": ["api","artist","deleteArtist"] }, "body": { "mode": "raw", "raw": "{\n  \"artistId\": \"{{artistId}}\"\n}" } }
        },
        {
          "name": "Follow Artist (User)",
          "request": { "method": "POST", "header": [ { "key": "Content-Type", "value": "application/json" } ], "url": { "raw": "{{baseUrl}}/api/artist/followArtist", "host": ["{{baseUrl}}"], "path": ["api","artist","followArtist"] }, "body": { "mode": "raw", "raw": "{\n  \"artistId\": \"{{artistId}}\",\n  \"userId\": \"{{userId}}\"\n}" } }
        },
        {
          "name": "Like Artist (User)",
          "request": { "method": "POST", "header": [ { "key": "Content-Type", "value": "application/json" } ], "url": { "raw": "{{baseUrl}}/api/artist/likeArtist", "host": ["{{baseUrl}}"], "path": ["api","artist","likeArtist"] }, "body": { "mode": "raw", "raw": "{\n  \"artistId\": \"{{artistId}}\",\n  \"userId\": \"{{userId}}\"\n}" } }
        },
        {
          "name": "Get All Artists",
          "request": { "method": "GET", "header": [], "url": { "raw": "{{baseUrl}}/api/artist/getAllArtists", "host": ["{{baseUrl}}"], "path": ["api","artist","getAllArtists"] } }
        },
        {
          "name": "Get Artist By Id",
          "request": { "method": "GET", "header": [], "url": { "raw": "{{baseUrl}}/api/artist/getArtistById/{{artistId}}", "host": ["{{baseUrl}}"], "path": ["api","artist","getArtistById","{{artistId}}"] } }
        },
        {
          "name": "Get My Artists (Admin)",
          "request": { "method": "GET", "header": [], "url": { "raw": "{{baseUrl}}/api/artist/getMyArtists", "host": ["{{baseUrl}}"], "path": ["api","artist","getMyArtists"] } }
        },
        {
          "name": "Get Liked Artists (User)",
          "request": { "method": "GET", "header": [], "url": { "raw": "{{baseUrl}}/api/artist/getLikedArtists", "host": ["{{baseUrl}}"], "path": ["api","artist","getLikedArtists"] } }
        },
        {
          "name": "Get Followed Artists (User)",
          "request": { "method": "GET", "header": [], "url": { "raw": "{{baseUrl}}/api/artist/getFollowedArtists", "host": ["{{baseUrl}}"], "path": ["api","artist","getFollowedArtists"] } }
        }
      ]
    },
    {
      "name": "content management",
      "item": [
        {
          "name": "Upload Song (Artist)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/artist/song/upload", "host": ["{{baseUrl}}"], "path": ["api","artist","song","upload"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"My Song\",\n  \"author\": \"{{artistName}}\",\n  \"trackUrl\": \"{{songTrackUrl}}\",\n  \"trackImg\": \"{{songCoverUrl}}\",\n  \"previewUrl\": \"{{songPreviewUrl}}\",\n  \"category\": [\"{{categorySlug}}\"],\n  \"genre\": [\"{{genreSlug}}\"],\n  \"description\": \"A powerful track\",\n  \"lyrics\": \"...\"\n}"
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('Created (201)', function () { pm.response.to.have.status(201); });",
              "pm.test('Track URL echoed', function(){ const j = pm.response.json(); pm.expect(j.song.trackUrl).to.eql(pm.collectionVariables.get('songTrackUrl')); });",
                "pm.collectionVariables.set('songId', (pm.response.json().song && pm.response.json().song._id) ? pm.response.json().song._id : '');",
                "pm.collectionVariables.set('trackId', (pm.response.json().song && pm.response.json().song.trackId) ? pm.response.json().song.trackId : '');"
            ] }
          }]
        },
        {
          "name": "Edit Song (Artist)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/artist/song/edit", "host": ["{{baseUrl}}"], "path": ["api","artist","song","edit"] },
            "body": { "mode": "raw", "raw": "{\n  \"songId\": \"{{songId}}\",\n  \"description\": \"Updated description\"\n}" }
          }
        },
        {
          "name": "Hide Song (Artist)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/artist/song/hide", "host": ["{{baseUrl}}"], "path": ["api","artist","song","hide"] },
            "body": { "mode": "raw", "raw": "{\n  \"songId\": \"{{songId}}\"\n}" }
          },
          "event": [{ "listen": "test", "script": { "type": "text/javascript", "exec": [
            "pm.test('OK (200)', function () { pm.response.to.have.status(200); });",
            "pm.test('Hidden true', function(){ const j = pm.response.json(); pm.expect(j.song.hidden).to.eql(true); });"
          ] } }]
        },
        {
          "name": "Unhide Song (Artist)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/artist/song/unhide", "host": ["{{baseUrl}}"], "path": ["api","artist","song","unhide"] },
            "body": { "mode": "raw", "raw": "{\n  \"songId\": \"{{songId}}\"\n}" }
          },
          "event": [{ "listen": "test", "script": { "type": "text/javascript", "exec": [
            "pm.test('OK (200)', function () { pm.response.to.have.status(200); });",
            "pm.test('Hidden false', function(){ const j = pm.response.json(); pm.expect(j.song.hidden).to.eql(false); });"
          ] } }]
        },
        {
          "name": "Remove Song (Artist)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/artist/song/remove", "host": ["{{baseUrl}}"], "path": ["api","artist","song","remove"] },
            "body": { "mode": "raw", "raw": "{\n  \"songId\": \"{{songId}}\"\n}" }
          }
        },
        {
          "name": "Upload Song to Album (Artist)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/artist/album/song/upload", "host": ["{{baseUrl}}"], "path": ["api","artist","album","song","upload"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"albumId\": \"{{albumId}}\",\n  \"title\": \"Another Track\",\n  \"author\": \"{{artistName}}\",\n  \"trackUrl\": \"{{songTrackUrl}}\",\n  \"trackImg\": \"{{songCoverUrl}}\",\n  \"category\": [\"{{categorySlug}}\"],\n  \"genre\": [\"{{genreSlug}}\"],\n  \"lyrics\": \"First line\\nSecond line\\nThird line\"\n}"
            }
          },
          "event": [{ "listen": "test", "script": { "type": "text/javascript", "exec": [
            "pm.test('Created (201)', function () { pm.response.to.have.status(201); });",
            "const j = pm.response.json();",
            "pm.test('Has song and album', function(){ pm.expect(j.song).to.be.an('object'); pm.expect(j.album).to.be.an('object'); });",
            "pm.collectionVariables.set('songId', (j.song && j.song._id) ? j.song._id : '');",
            "pm.collectionVariables.set('trackId', (j.song && j.song.trackId) ? j.song.trackId : '');",
            "pm.test('Album includes trackId', function(){ pm.expect(Array.isArray(j.album.tracksId)).to.eql(true); pm.expect(j.album.tracksId.includes(pm.collectionVariables.get('trackId'))).to.eql(true); });"
          ] } }]
        },
        {
          "name": "My Songs (Artist)",
          "request": { "method": "GET", "header": [], "url": { "raw": "{{baseUrl}}/api/artist/song/my", "host": ["{{baseUrl}}"], "path": ["api","artist","song","my"] } }
        },
        {
          "name": "Upload Album (Artist)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/artist/album/upload", "host": ["{{baseUrl}}"], "path": ["api","artist","album","upload"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Debut Album\",\n  \"coverImg\": \"{{albumCoverUrl}}\",\n  \"description\": \"Album description\",\n  \"category\": [\"{{categorySlug}}\"],\n  \"genre\": [\"{{genreSlug}}\"],\n  \"songs\": [\n    {\n      \"title\": \"Intro Track\",\n      \"author\": \"{{artistName}}\",\n      \"trackId\": \"ALB-TRACK-001\",\n      \"trackUrl\": \"{{songTrackUrl}}\",\n      \"trackImg\": \"{{songCoverUrl}}\",\n      \"previewUrl\": \"{{songPreviewUrl}}\",\n      \"category\": [\"{{categorySlug}}\"],\n      \"genre\": [\"{{genreSlug}}\"],\n      \"lyrics\": \"Line 1\\nLine 2\\nLine 3\"\n    }\n  ]\n}"
            }
          },
          "event": [{ "listen": "test", "script": { "type": "text/javascript", "exec": [
            "pm.test('Created (201)', function () { pm.response.to.have.status(201); });",
            "pm.collectionVariables.set('albumId', (pm.response.json().album && pm.response.json().album._id) ? pm.response.json().album._id : '');",
            "pm.test('Cover URL echoed', function(){ const j = pm.response.json(); pm.expect(j.album.coverImg).to.eql(pm.collectionVariables.get('albumCoverUrl')); });",
            "pm.test('Album has tracks', function(){ const j = pm.response.json(); pm.expect(Array.isArray(j.album.tracksId)).to.eql(true); pm.expect(j.album.tracksId.length).to.be.at.least(1); });"
          ] } }]
        },
        {
          "name": "Edit Album (Artist)",
          "request": { "method": "POST", "header": [{ "key": "Content-Type", "value": "application/json" }], "url": { "raw": "{{baseUrl}}/api/artist/album/edit", "host": ["{{baseUrl}}"], "path": ["api","artist","album","edit"] }, "body": { "mode": "raw", "raw": "{\n  \"albumId\": \"{{albumId}}\",\n  \"description\": \"Updated album description\",\n  \"category\": [\"{{categorySlug}}\"],\n  \"genre\": [\"{{genreSlug}}\"]\n}" } }
        },
        {
          "name": "Hide Album (Artist)",
          "request": { "method": "POST", "header": [{ "key": "Content-Type", "value": "application/json" }], "url": { "raw": "{{baseUrl}}/api/artist/album/hide", "host": ["{{baseUrl}}"], "path": ["api","artist","album","hide"] }, "body": { "mode": "raw", "raw": "{\n  \"albumId\": \"{{albumId}}\"\n}" } },
          "event": [{ "listen": "test", "script": { "type": "text/javascript", "exec": [
            "pm.test('OK (200)', function () { pm.response.to.have.status(200); });",
            "pm.test('Hidden true', function(){ const j = pm.response.json(); pm.expect(j.album.hidden).to.eql(true); });"
          ] } }]
        },
        {
          "name": "Unhide Album (Artist)",
          "request": { "method": "POST", "header": [{ "key": "Content-Type", "value": "application/json" }], "url": { "raw": "{{baseUrl}}/api/artist/album/unhide", "host": ["{{baseUrl}}"], "path": ["api","artist","album","unhide"] }, "body": { "mode": "raw", "raw": "{\n  \"albumId\": \"{{albumId}}\"\n}" } },
          "event": [{ "listen": "test", "script": { "type": "text/javascript", "exec": [
            "pm.test('OK (200)', function () { pm.response.to.have.status(200); });",
            "pm.test('Hidden false', function(){ const j = pm.response.json(); pm.expect(j.album.hidden).to.eql(false); });"
          ] } }]
        },
        {
          "name": "Remove Album (Artist)",
          "request": { "method": "POST", "header": [{ "key": "Content-Type", "value": "application/json" }], "url": { "raw": "{{baseUrl}}/api/artist/album/remove", "host": ["{{baseUrl}}"], "path": ["api","artist","album","remove"] }, "body": { "mode": "raw", "raw": "{\n  \"albumId\": \"{{albumId}}\"\n}" } }
        },
        {
          "name": "My Albums (Artist)",
          "request": { "method": "GET", "header": [], "url": { "raw": "{{baseUrl}}/api/artist/album/my", "host": ["{{baseUrl}}"], "path": ["api","artist","album","my"] } }
        },
        {
          "name": "Edit Artist Profile",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/api/artist/profile/edit", "host": ["{{baseUrl}}"], "path": ["api","artist","profile","edit"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"about\": \"Short bio\",\n  \"description\": \"Longer description\",\n  \"profileImg\": \"{{artistProfileImgUrl}}\"\n}"
            }
          }
        }
      ]
    }
    ,
    {
      "name": "dashboard",
      "item": [
        {
          "name": "Get Artist Stats",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/artist/dashboard/stats", "host": ["{{baseUrl}}"], "path": ["api","artist","dashboard","stats"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('success true and stats present', function(){ const j = pm.response.json(); pm.expect(j.success).to.eql(true); pm.expect(j).to.have.property('stats'); pm.expect(j.stats).to.have.property('totals'); });",
              "pm.test('totals keys are numbers', function(){ const j = pm.response.json(); const t = j.stats.totals; const keys = ['songs','albums','playlists','hiddenSongs','hiddenAlbums','songLikes','albumLikes','followers','profileLikes']; keys.forEach(k => { pm.expect(t).to.have.property(k); pm.expect(t[k]).to.be.a('number'); pm.expect(t[k]).to.be.at.least(0); }); });",
              "pm.test('topCategories array shape', function(){ const j = pm.response.json(); pm.expect(j.stats.topCategories).to.be.an('array'); if (j.stats.topCategories.length > 0) { const item = j.stats.topCategories[0]; pm.expect(item).to.be.an('object'); pm.expect(item).to.have.property('slug').that.is.a('string'); pm.expect(item).to.have.property('count').that.is.a('number'); } });",
              "pm.test('topGenres array shape', function(){ const j = pm.response.json(); pm.expect(j.stats.topGenres).to.be.an('array'); if (j.stats.topGenres.length > 0) { const item = j.stats.topGenres[0]; pm.expect(item).to.be.an('object'); pm.expect(item).to.have.property('slug').that.is.a('string'); pm.expect(item).to.have.property('count').that.is.a('number'); } });"
            ]}
          }]
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Attach cookies from collection variables so AuthenticateUser/Admin can read them",
          "const access = pm.collectionVariables.get('accessToken');",
          "const refresh = pm.collectionVariables.get('refreshToken');",
          "const adminAccess = pm.collectionVariables.get('adminAccessToken');",
          "const adminRefresh = pm.collectionVariables.get('adminRefreshToken');",
          "let cookieHeader = '';",
          "if (access) cookieHeader += `apostolicaccesstoken=${access};`;",
          "if (refresh) cookieHeader += ` apostolictoken=${refresh};`;",
          "if (adminAccess) cookieHeader += ` apostolicadminaccesstoken=${adminAccess};`;",
          "if (adminRefresh) cookieHeader += ` apostolicadmintoken=${adminRefresh};`;",
          "if (cookieHeader) { pm.request.headers.upsert({ key: 'Cookie', value: cookieHeader.trim() }); }"
          ,"// Also attach Authorization header if access token present (server supports Bearer)",
          "if (access) { pm.request.headers.upsert({ key: 'Authorization', value: `Bearer ${access}` }); }"
        ]
      }
    }
  ],
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:10000" },
    { "key": "artistEmail", "value": "artist@example.com" },
    { "key": "artistPassword", "value": "password123" },
    { "key": "artistNewPassword", "value": "newpassword123" },
    { "key": "artistName", "value": "Sample Artist" },
    { "key": "artistOtp", "value": "1234" },
    { "key": "artistId", "value": "" },
    { "key": "userId", "value": "" },
    { "key": "accessToken", "value": "" },
    { "key": "refreshToken", "value": "" },
    { "key": "adminAccessToken", "value": "" },
    { "key": "adminRefreshToken", "value": "" },
    { "key": "songTrackUrl", "value": "https://res.cloudinary.com/demo/video/upload/v123456/sample.mp3" },
    { "key": "songCoverUrl", "value": "https://res.cloudinary.com/demo/image/upload/v123456/cover.jpg" },
    { "key": "songPreviewUrl", "value": "https://res.cloudinary.com/demo/video/upload/v123456/preview.mp3" },
    { "key": "songId", "value": "" },
    { "key": "albumCoverUrl", "value": "https://res.cloudinary.com/demo/image/upload/v123456/album.jpg" },
    { "key": "albumId", "value": "" },
    { "key": "categorySlug", "value": "pop" },
    { "key": "genreSlug", "value": "afrobeats" },
    { "key": "artistProfileImgUrl", "value": "https://res.cloudinary.com/demo/image/upload/v123456/profile.jpg" }
  ]
}
