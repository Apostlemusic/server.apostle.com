{
  "info": {
    "name": "content",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "b6f0f5f2-0b2e-4c2b-9a37-contents"
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:10000" },
    { "key": "accessToken", "value": "" },
    { "key": "adminAccessToken", "value": "" },
    { "key": "userId", "value": "" },
    { "key": "songId", "value": "" },
    { "key": "trackId", "value": "" },
    { "key": "playlistId", "value": "" },
    { "key": "categorySlug", "value": "pop" },
    { "key": "genreSlug", "value": "afrobeats" }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Build Cookie header from stored tokens (set by prior auth requests)",
          "const access = pm.collectionVariables.get('accessToken');",
          "const adminAccess = pm.collectionVariables.get('adminAccessToken');",
          "let cookieHeader = '';",
          "if (access) cookieHeader += `apostolicaccesstoken=${access};`;",
          "if (adminAccess) cookieHeader += ` apostolicadminaccesstoken=${adminAccess};`;",
          "if (cookieHeader) {",
          "  const hasCookie = pm.request.headers.has('Cookie');",
          "  if (hasCookie) { pm.request.headers.upsert({ key: 'Cookie', value: cookieHeader }); }",
          "  else { pm.request.headers.add({ key: 'Cookie', value: cookieHeader }); }",
          "}",
          "// Also attach Authorization header if access token present (server supports Bearer)",
          "if (access) { pm.request.headers.upsert({ key: 'Authorization', value: `Bearer ${access}` }); }"
        ]
      }
    }
  ],
  "item": [
    {
      "name": "songs",
      "item": [
        {
          "name": "Get All Songs",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/songs", "host": ["{{baseUrl}}"], "path": ["api","content","songs"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('success true', function(){ const json = pm.response.json(); pm.expect(json.success).to.eql(true); });",
              "pm.test('songs array', function(){ const json = pm.response.json(); pm.expect(json.songs).to.be.an('array'); });",
              "pm.test('response time < 1500ms', function(){ pm.expect(pm.response.responseTime).to.be.below(1500); });"
            ]}
          }]
        },
        {
          "name": "Get Song By Id",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/songs/{{songId}}", "host": ["{{baseUrl}}"], "path": ["api","content","songs","{{songId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK or 404', function(){ pm.expect([200,404]).to.include(pm.response.code); });",
              "if (pm.response.code === 200) {",
              "  const json = pm.response.json();",
              "  pm.test('has song', function(){ pm.expect(json.song).to.be.an('object'); });",
              "  pm.test('lyricsParsed array present', function(){ pm.expect(json.lyricsParsed).to.be.an('array'); });",
              "}"
            ]}
          }]
        },
        {
          "name": "Get Song By TrackId",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/songs/track/{{trackId}}", "host": ["{{baseUrl}}"], "path": ["api","content","songs","track","{{trackId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK or 404', function(){ pm.expect([200,404]).to.include(pm.response.code); });",
              "if (pm.response.code === 200) {",
              "  const json = pm.response.json();",
              "  pm.test('has song', function(){ pm.expect(json.song).to.be.an('object'); });",
              "  pm.test('lyricsParsed array present', function(){ pm.expect(json.lyricsParsed).to.be.an('array'); });",
              "}"
            ]}
          }]
        },
        {
          "name": "Get Song Lyrics",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/songs/{{songId}}/lyrics", "host": ["{{baseUrl}}"], "path": ["api","content","songs","{{songId}}","lyrics"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK or 404', function(){ pm.expect([200,404]).to.include(pm.response.code); });",
              "if (pm.response.code === 200) {",
              "  const json = pm.response.json();",
              "  pm.test('has lyrics', function(){ pm.expect(json.lyrics).to.be.a('string'); });",
              "}"
            ]}
          }]
        },
        {
          "name": "Search Songs",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/songs/search/test", "host": ["{{baseUrl}}"], "path": ["api","content","songs","search","test"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('success true', function(){ const json = pm.response.json(); pm.expect(json.success).to.eql(true); });",
              "pm.test('songs array', function(){ const json = pm.response.json(); pm.expect(json.songs).to.be.an('array'); });"
            ]}
          }]
        },
        {
          "name": "Songs By Category",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/songs/category/{{categorySlug}}", "host": ["{{baseUrl}}"], "path": ["api","content","songs","category","{{categorySlug}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('songs array', function(){ const json = pm.response.json(); pm.expect(json.songs).to.be.an('array'); });"
            ]}
          }]
        },
        {
          "name": "Get Liked Songs",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": {
              "raw": "{{baseUrl}}/api/content/songs/liked?userId={{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api","content","songs","liked"],
              "query": [ {"key": "userId", "value": "{{userId}}"} ]
            }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('success true', function(){ const json = pm.response.json(); pm.expect(json.success).to.eql(true); });",
              "pm.test('songs array', function(){ const json = pm.response.json(); pm.expect(json.songs).to.be.an('array'); });"
            ]}
          }]
        },
        {
          "name": "Like/Unlike Song",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Accept", "value": "application/json" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"songId\": \"{{songId}}\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/songs/like", "host": ["{{baseUrl}}"], "path": ["api","content","songs","like"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('returns likes array', function(){ const json = pm.response.json(); pm.expect(json.likes).to.be.an('array'); });"
            ]}
          }]
        },
        {
          "name": "Create Song",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Accept", "value": "application/json" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"title\": \"Test Track\",\n  \"author\": \"Sample Artist\",\n  \"trackId\": \"TRACK-XYZ\",\n  \"trackUrl\": \"https://res.cloudinary.com/demo/audio.mp3\",\n  \"trackImg\": \"https://res.cloudinary.com/demo/cover.jpg\",\n  \"previewUrl\": \"https://res.cloudinary.com/demo/preview.mp3\",\n  \"category\": [\"{{categorySlug}}\"],\n  \"genre\": [\"{{genreSlug}}\"],\n  \"lyrics\": \"First line\\nSecond line\\nThird line\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/songs", "host": ["{{baseUrl}}"], "path": ["api","content","songs"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('201 Created', function(){ pm.response.to.have.status(201); });",
              "pm.test('created song object', function(){ const json = pm.response.json(); pm.expect(json.song).to.be.an('object'); });",
              "pm.collectionVariables.set('songId', (pm.response.json().song && pm.response.json().song._id) ? pm.response.json().song._id : '');",
              "pm.collectionVariables.set('trackId', (pm.response.json().song && pm.response.json().song.trackId) ? pm.response.json().song.trackId : '');"
            ]}
          }]
        },
        {
          "name": "Update Song",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Accept", "value": "application/json" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"id\": \"{{songId}}\",\n  \"title\": \"Updated Title\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/songs", "host": ["{{baseUrl}}"], "path": ["api","content","songs"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('updated song object', function(){ const json = pm.response.json(); pm.expect(json.song).to.be.an('object'); });"
            ]}
          }]
        },
        {
          "name": "Delete Songs",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Accept", "value": "application/json" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"ids\": [\"{{songId}}\"]\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/songs", "host": ["{{baseUrl}}"], "path": ["api","content","songs"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('message present', function(){ const json = pm.response.json(); pm.expect(json.message).to.be.a('string'); });"
            ]}
          }]
        },
        {
          "name": "Hide Song",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Accept", "value": "application/json" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"songId\": \"{{songId}}\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/songs/hide", "host": ["{{baseUrl}}"], "path": ["api","content","songs","hide"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('success true', function(){ const json = pm.response.json(); pm.expect(json.success).to.eql(true); });"
            ]}
          }]
        },
        {
          "name": "Unhide Song",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Accept", "value": "application/json" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"songId\": \"{{songId}}\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/songs/unhide", "host": ["{{baseUrl}}"], "path": ["api","content","songs","unhide"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('success true', function(){ const json = pm.response.json(); pm.expect(json.success).to.eql(true); });"
            ]}
          }]
        }
      ]
    },
    {
      "name": "playlists",
      "item": [
        {
          "name": "Create Playlist",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" }, { "key": "Accept", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{\n  \"name\": \"My Mix\",\n  \"userId\": \"{{userId}}\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/playlists", "host": ["{{baseUrl}}"], "path": ["api","content","playlists"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('201 Created', function(){ pm.response.to.have.status(201); });",
              "pm.test('created playlist object', function(){ const json = pm.response.json(); pm.expect(json.playList).to.be.an('object'); });"
            ]}
          }]
        },
        {
          "name": "Add Track",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" }, { "key": "Accept", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{\n  \"playlistId\": \"{{playlistId}}\",\n  \"trackId\": \"{{songId}}\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/playlists/add", "host": ["{{baseUrl}}"], "path": ["api","content","playlists","add"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('playlist object', function(){ const json = pm.response.json(); pm.expect(json.playList).to.be.an('object'); });"
            ]}
          }]
        },
        {
          "name": "Remove Track",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" }, { "key": "Accept", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{\n  \"playlistId\": \"{{playlistId}}\",\n  \"trackId\": \"{{songId}}\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/playlists/remove-track", "host": ["{{baseUrl}}"], "path": ["api","content","playlists","remove-track"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('playlist object', function(){ const json = pm.response.json(); pm.expect(json.playList).to.be.an('object'); });"
            ]}
          }]
        },
        {
          "name": "Delete Playlist",
          "request": {
            "method": "DELETE",
            "header": [ { "key": "Content-Type", "value": "application/json" }, { "key": "Accept", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{\n  \"playlistId\": \"{{playlistId}}\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/playlists", "host": ["{{baseUrl}}"], "path": ["api","content","playlists"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('message present', function(){ const json = pm.response.json(); pm.expect(json.message).to.be.a('string'); });"
            ]}
          }]
        },
        {
          "name": "Get User Playlists",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/playlists?userId={{userId}}", "host": ["{{baseUrl}}"], "path": ["api","content","playlists"], "query": [ {"key":"userId","value":"{{userId}}"} ] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('playLists array', function(){ const json = pm.response.json(); pm.expect(json.playLists).to.be.an('array'); });"
            ]}
          }]
        },
        {
          "name": "Get Playlist By Id",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/playlists/{{playlistId}}", "host": ["{{baseUrl}}"], "path": ["api","content","playlists","{{playlistId}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK or 404', function(){ pm.expect([200,404]).to.include(pm.response.code); });",
              "if (pm.response.code === 200) { const json = pm.response.json(); pm.test('has playlist', function(){ pm.expect(json.playList).to.be.an('object'); }); }"
            ]}
          }]
        }
      ]
    },
    {
      "name": "categories",
      "item": [
        {
          "name": "Create Category (Admin)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" }, { "key": "Accept", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{\n  \"name\": \"Pop\",\n  \"slug\": \"pop\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/categories", "host": ["{{baseUrl}}"], "path": ["api","content","categories"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('201 Created', function(){ pm.response.to.have.status(201); });",
              "pm.test('created category object', function(){ const json = pm.response.json(); pm.expect(json.category).to.be.an('object'); });"
            ]}
          }]
        },
        {
          "name": "Update Category (Admin)",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Content-Type", "value": "application/json" }, { "key": "Accept", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{\n  \"id\": \"cat-id\",\n  \"name\": \"Pop Updated\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/categories", "host": ["{{baseUrl}}"], "path": ["api","content","categories"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('updated category object', function(){ const json = pm.response.json(); pm.expect(json.category).to.be.an('object'); });"
            ]}
          }]
        },
        {
          "name": "Delete Category (Admin)",
          "request": {
            "method": "DELETE",
            "header": [ { "key": "Content-Type", "value": "application/json" }, { "key": "Accept", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{\n  \"id\": \"cat-id\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/categories", "host": ["{{baseUrl}}"], "path": ["api","content","categories"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('message present', function(){ const json = pm.response.json(); pm.expect(json.message).to.be.a('string'); });"
            ]}
          }]
        },
        {
          "name": "Get All Categories",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/categories", "host": ["{{baseUrl}}"], "path": ["api","content","categories"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('categories array', function(){ const json = pm.response.json(); pm.expect(json.categories).to.be.an('array'); });"
            ]}
          }]
        },
        {
          "name": "Get Category By Slug",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/categories/{{categorySlug}}", "host": ["{{baseUrl}}"], "path": ["api","content","categories","{{categorySlug}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK or 404', function(){ pm.expect([200,404]).to.include(pm.response.code); });",
              "if (pm.response.code === 200) { const json = pm.response.json(); pm.test('has category', function(){ pm.expect(json.category).to.be.an('object'); }); }"
            ]}
          }]
        }
      ]
    },
    {
      "name": "genres",
      "item": [
        {
          "name": "Create Genre (Admin)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" }, { "key": "Accept", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{\n  \"name\": \"Afrobeats\",\n  \"slug\": \"afrobeats\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/genres", "host": ["{{baseUrl}}"], "path": ["api","content","genres"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('201 Created', function(){ pm.response.to.have.status(201); });",
              "pm.test('created genre object', function(){ const json = pm.response.json(); pm.expect(json.genre).to.be.an('object'); });"
            ]}
          }]
        },
        {
          "name": "Update Genre (Admin)",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Content-Type", "value": "application/json" }, { "key": "Accept", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{\n  \"id\": \"gen-id\",\n  \"name\": \"Afrobeats Updated\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/genres", "host": ["{{baseUrl}}"], "path": ["api","content","genres"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('updated genre object', function(){ const json = pm.response.json(); pm.expect(json.genre).to.be.an('object'); });"
            ]}
          }]
        },
        {
          "name": "Delete Genre (Admin)",
          "request": {
            "method": "DELETE",
            "header": [ { "key": "Content-Type", "value": "application/json" }, { "key": "Accept", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{\n  \"id\": \"gen-id\"\n}" },
            "url": { "raw": "{{baseUrl}}/api/content/genres", "host": ["{{baseUrl}}"], "path": ["api","content","genres"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('message present', function(){ const json = pm.response.json(); pm.expect(json.message).to.be.a('string'); });"
            ]}
          }]
        },
        {
          "name": "Get All Genres",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/genres", "host": ["{{baseUrl}}"], "path": ["api","content","genres"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK', function(){ pm.response.to.have.status(200); });",
              "pm.test('genres array', function(){ const json = pm.response.json(); pm.expect(json.genres).to.be.an('array'); });"
            ]}
          }]
        },
        {
          "name": "Get Genre By Slug",
          "request": {
            "method": "GET",
            "header": [ { "key": "Accept", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/content/genres/{{genreSlug}}", "host": ["{{baseUrl}}"], "path": ["api","content","genres","{{genreSlug}}"] }
          },
          "event": [{
            "listen": "test",
            "script": { "type": "text/javascript", "exec": [
              "pm.test('200 OK or 404', function(){ pm.expect([200,404]).to.include(pm.response.code); });",
              "if (pm.response.code === 200) { const json = pm.response.json(); pm.test('has genre', function(){ pm.expect(json.genre).to.be.an('object'); }); }"
            ]}
          }]
        }
      ]
    }
  ]
}
